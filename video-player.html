<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player | Food Industry Asia (FIA)</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/custom.css">

    <link rel="icon" href="images/cropped-favicon-32x32.png" sizes="32x32">
    <link rel="icon" href="images/cropped-favicon-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="images/cropped-favicon-180x180.png">
</head>

<body>
    <header class="site-header">
        <div class="header-bottom">
            <div class="container">
                <nav class="navbar navbar-expand-lg py-2">
                    <a href="/" class="logo-link mb-2">
                        <img src="images/weblogobk.png" alt="foodIndustry" height="80" width="150" class="logo-main">
                    </a>
                    <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse"
                        data-bs-target="#mainNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse pt-2" id="mainNav">
                        <ul class="navbar-nav me-auto ms-lg-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="/">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/about.html">About Us</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/membership.html">Membership & Benefits</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/blogs.html">Insights Hub</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/events.html">Events</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle active" href="#" data-bs-toggle="dropdown">Videos</a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="/digital-stories.html"> Digital Stories</a></li>
                                    <li><a class="dropdown-item" href="https://fiatv.foodindustry.asia/">Feeding Asia's Future</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/contact.html">Contact Us</a>
                            </li>
                        </ul>
                        <div class="login-area py-3 py-lg-0">
                            <img src="images/login-icon.png" width="26" height="18" alt="Login">
                            <a href="#">Members Login</a>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <main class="video-player-container">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <a href="/digital-stories.html" class="back-button">
                        <i class="fa-solid fa-arrow-left"></i>
                        Back to Digital Stories
                    </a>

                    <div class="player-wrapper">
                        <div class="video-container" id="videoPlayer"></div>
                    </div>

                    <div class="video-details">
                        <div class="video-title-section">
                            <h1 class="video-player-title" id="videoTitle"></h1>
                            <div class="video-player-stats">
                                <span class="stat-item">
                                    <i class="fa-solid fa-eye"></i>
                                    <span id="videoViews"></span>
                                </span>
                                <span class="stat-item">
                                    <i class="fa-solid fa-calendar"></i>
                                    <span id="videoDate"></span>
                                </span>
                            </div>
                        </div>

                        <div class="video-actions-bar">
                            <button class="action-button" id="downloadBtn">
                                <i class="fa-solid fa-download"></i>
                                Download
                            </button>
                            <button class="action-button" id="shareBtn">
                                <i class="fa-solid fa-share"></i>
                                Share
                            </button>
                            <button class="action-button" id="watchLaterBtn">
                                <i class="fa-solid fa-clock"></i>
                                Watch Later
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="related-videos">
                        <h2 class="related-title">Related Videos</h2>
                        <div id="relatedVideosList"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="footer-main py-5">
            <div class="container">
                <div class="row g-4">
                    <div class="col-lg-4 col-md-6">
                        <div class="footer-about">
                            <img src="images/weblogo.png" width="311" height="80" alt="foodIndustry"
                                class="footer-logo mb-4">
                            <p class="footer-description">Keep up with the latest industry insights, policy updates, and innovation stories from across Asia's food and beverage community.
                            </p>
                            <div class="footer-social">
                                <a href="https://www.linkedin.com/company/food-industry-asia" aria-label="LinkedIn"><i
                                        class="fa-brands fa-linkedin"></i></a>
                                <a href="https://www.youtube.com/c/foodindustryasia" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-6">
                        <div class="footer-contact">
                            <h4 class="footer-title">Contact Us</h4>
                            <div class="contact-info-list">
                                <div class="contact-info-item">
                                    <i class="fa-solid fa-location-dot"></i>
                                    <div class="contact-details">
                                        <span class="contact-label">Address:</span>
                                        <span>Food Industry Asia (FIA),<br>
                                            33 Mohamed Sultan Road #03-02<br>
                                            Singapore 238977</span>
                                    </div>
                                </div>
                                <div class="contact-info-item">
                                    <i class="fa-solid fa-envelope"></i>
                                    <div class="contact-details">
                                        <span class="contact-label">Email:</span>
                                        <a href="mailto:info@foodindustry.asia">info@foodindustry.asia</a>
                                    </div>
                                </div>
                                <div class="contact-info-item">
                                    <i class="fa-solid fa-phone"></i>
                                    <div class="contact-details">
                                        <span class="contact-label">Phone:</span>
                                        <a href="tel:+6562353854">(+65) 6235 3854</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12">
                        <div class="footer-links-wrapper">
                            <div class="row">
                                <div class="col-12">
                                    <h4 class="footer-title">Quick Links</h4>
                                    <ul class="footer-menu">
                                        <li><a href="/index.html"><i class="fa-solid fa-chevron-right"></i> Home</a></li>
                                        <li><a href="/about.html"><i class="fa-solid fa-chevron-right"></i> About Us</a></li>
                                        <li><a href="/membership.html"><i class="fa-solid fa-chevron-right"></i> Membership & Benefits</a></li>
                                        <li><a href="/events.html"><i class="fa-solid fa-chevron-right"></i> Events</a></li>
                                        <li class="footer-dropdown">
                                            <a onclick="this.parentElement.classList.toggle('active')"><i class="fa-solid fa-chevron-right"></i> FIA TV</a>
                                            <ul class="footer-dropdown-menu">
                                                <li><a href="/digital-stories.html">Digital Stories</a></li>
                                                <li><a href="https://fiatv.foodindustry.asia/">Feeding Asia's Future</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="/blogs.html"><i class="fa-solid fa-chevron-right"></i> Insights Hub</a></li>
                                        <li><a href="/contact.html"><i class="fa-solid fa-chevron-right"></i> Contact Us</a></li>
                                        <li><a href="#"><i class="fa-solid fa-chevron-right"></i> Members Login</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom py-3">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6 text-center text-md-start">
                        <p class="copyright-text mb-0">© 2025 Food Industry Asia (FIA). All Rights Reserved.</p>
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <ul class="footer-bottom-links">
                            <li><a href="/privacy-policy/">Privacy Policy</a></li>
                            <li><a href="/terms-conditions/">Terms & Conditions</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        class VideoPlayer {
            constructor() {
                this.videos = this.loadVideos();
                this.currentVideoId = this.getVideoIdFromUrl();
                this.currentVideo = this.videos.find(v => v.id === this.currentVideoId);
                
                if (this.currentVideo) {
                    this.init();
                } else {
                    window.location.href = '/digital-stories.html';
                }
            }

            loadVideos() {
                const stored = localStorage.getItem('digitalStories');
                if (stored) {
                    const videos = JSON.parse(stored);
                    return videos.map(v => ({
                        ...v,
                        date: new Date(v.date)
                    }));
                }
                return [];
            }

            getVideoIdFromUrl() {
                const params = new URLSearchParams(window.location.search);
                return parseInt(params.get('id'));
            }

            getThumbnailUrl(videoId) {
                return `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
            }

            getEmbedUrl(videoId) {
                return `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
            }

            formatDate(date) {
                const now = new Date();
                const diff = Math.floor((now - date) / (1000 * 60 * 60 * 24));
                
                if (diff === 0) return 'Today';
                if (diff === 1) return 'Yesterday';
                if (diff < 7) return `${diff} days ago`;
                if (diff < 30) return `${Math.floor(diff / 7)} weeks ago`;
                if (diff < 365) return `${Math.floor(diff / 30)} months ago`;
                return `${Math.floor(diff / 365)} years ago`;
            }

            renderPlayer() {
                const playerContainer = document.getElementById('videoPlayer');
                playerContainer.innerHTML = `
                    <iframe 
                        src="${this.getEmbedUrl(this.currentVideo.videoId)}"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                `;

                document.getElementById('videoTitle').textContent = this.currentVideo.title;
                document.getElementById('videoViews').textContent = this.currentVideo.views.toLocaleString() + ' views';
                document.getElementById('videoDate').textContent = this.formatDate(this.currentVideo.date);

                this.currentVideo.views++;
                this.saveVideos();
            }

            renderRelatedVideos() {
                const relatedList = document.getElementById('relatedVideosList');
                const relatedVideos = this.videos.filter(v => v.id !== this.currentVideoId).slice(0, 5);

                relatedList.innerHTML = relatedVideos.map(video => `
                    <div class="related-video-item" onclick="videoPlayer.playRelatedVideo(${video.id})">
                        <div class="related-thumbnail">
                            <img src="${this.getThumbnailUrl(video.videoId)}" alt="${video.title}">
                            <span class="related-duration">${video.duration}</span>
                        </div>
                        <div class="related-info">
                            <h3 class="related-video-title">${video.title}</h3>
                            <p class="related-video-stats">
                                ${video.views.toLocaleString()} views • ${this.formatDate(video.date)}
                            </p>
                        </div>
                    </div>
                `).join('');
            }

            playRelatedVideo(id) {
                window.location.href = `video-player.html?id=${id}`;
            }

            downloadVideo() {
                window.open(this.currentVideo.videoUrl, '_blank');
            }

            shareVideo() {
                const url = window.location.href;
                if (navigator.share) {
                    navigator.share({
                        title: this.currentVideo.title,
                        url: url
                    });
                } else {
                    navigator.clipboard.writeText(url);
                    alert('Link copied to clipboard!');
                }
            }

            watchLater() {
                let watchLater = JSON.parse(localStorage.getItem('watchLater') || '[]');
                if (!watchLater.includes(this.currentVideoId)) {
                    watchLater.push(this.currentVideoId);
                    localStorage.setItem('watchLater', JSON.stringify(watchLater));
                    alert('Added to Watch Later!');
                } else {
                    alert('Already in Watch Later!');
                }
            }

            saveVideos() {
                localStorage.setItem('digitalStories', JSON.stringify(this.videos));
            }

            init() {
                this.renderPlayer();
                this.renderRelatedVideos();

                document.getElementById('downloadBtn').addEventListener('click', () => {
                    this.downloadVideo();
                });

                document.getElementById('shareBtn').addEventListener('click', () => {
                    this.shareVideo();
                });

                document.getElementById('watchLaterBtn').addEventListener('click', () => {
                    this.watchLater();
                });
            }
        }

        const videoPlayer = new VideoPlayer();
    </script>
</body>

</html>
